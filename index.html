<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>测试</title>
</head>
<style>
    #view {
        width: 50%;
        height: 100%;
        border: 1px solid;
    }

    #console {
        width: 74%;
    }

    span {
        font-size: 0;
    }
</style>

<body>
    <div id="view">
        <div id="console">

        </div>
    </div>
    <div id="view1">
        <span>送你一颗小心心</span>
    </div>
    <div class="view2">
        <div class="l"></div>
        <div class="r"></div>
    </div>
    <script>
        var log = console.log.bind(console)

        var endConsole = document.getElementById('console')
        var d = document;

        var style = d.createElement("style")

        d.body.insertBefore(style, null);
        var arr = [];
        var temp =
            `/*现在开始变色*/
            *{
                transition:all 1s;
            }
            #view,h1{transition:all 1s;}
            #view{background-color:#ccc;margin:0 auto;}
            h1{color:red;transform:translateX(50%)}
            /* 有点小了大一点？*/
            #view {width:80%;
                    font-size:20px;}
            /* 黑客的样子？*/
            #view {font-size:14px
                ;background:#000;
                color:green}
            /* 还是太小了*/
            #view {font-size:20px}
            span{display:block;text-align:center;
                font-size:20px;animation:colorReDraw 5s infinite}
                /*送你一颗信心心吧晚安~*/
                keyframes colorReDraw {
        0% {
            color: #fff;
            text-shadow: 0 1px 0 #fff;
        }
        50% {
            color: #3f3f3f;
            text-shadow: 0 1px 0 #000;
        }
        100% {
            color: #000;
        }
    }
      .view2 {
         position: relative;
            transform: translate0(149px);
            width: 50%;
            height: 100%;
    }
    .view2 .l,
    .view2 .r {
        position: absolute;
        left: 50%;
        width: 75px;
        height: 100px;
        background-color: crimson;
        border-radius: 50% 50% 0px 0;
        transform-origin: center;
        transition: background 1s;
    }
    .view2 .l {
        left: 43%;
        transform: rotate(-51deg);
    }
    .view2 .r {
        transform: rotate(45deg);
        left: 46%;
    }
      .view2 {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }
        `;

        for (const iterator of temp) {
            arr.push(iterator)
        }


        log(arr)

        var index = 0;

        function inner() {
            endConsole.append(arr[index]);
            style.innerHTML += arr[index];
            // 处理视图中换行  不太完善 但是 不想用正则
            if (arr[index] == "}" || (arr[index] == "*" && arr[index + 1] == "/")) {
                endConsole.innerHTML += "<br />";
            }
            index++;
            if (arr[index] == undefined) {
                // arr.splice(index, 1)
                return
            };

            setTimeout(inner, 1000 / 60);
        }
        inner();
    </script>
</body>

</html>
